language: python

python:
  - "3.7.3"

services:
  - postgresql 

before_script:
  - psql -c 'create database travis_ci_test;' -U postgres
  - psql -c 'create table usuarios (ID_Usu serial primary key not null, name text, pw text, progres text, marca text, tipo text, cigar integer);' -U postgres
  - psql -c 'insert into usuarios (name,pw,progres,marca,tipo,cigar) VALUES('Usuario 1','123','23','MarcaA','Industrial',22);' -U postgres


# command to install dependencies
install:
  - pip3 install -r requirements.txt
script: pytest -v test.py
