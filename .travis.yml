language: python

python:
  - "3.7.3"

services:
  - postgresql 

before_script:
  - psql -c 'create database travis_ci_test;' -U postgres
  - psql -c 'create table usuarios (ID_Usu serial primary key not null, name text, pw text, progres text, marca text, tipo text, N_cigar integer);' -U postgres
  - psal -c 'insert into usuarios (name,pw,progres,marca,tipo,"N_cigar") VALUES('Usuario 1','123','23','MarcaA','Industrial',22)'


# command to install dependencies
install:
  - pip3 install -r requirements.txt
script: pytest -v test.py
