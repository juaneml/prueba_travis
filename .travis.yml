language: python

python:
  - "3.7.3"

services:
  - postgresql 

before_script:
  - psql -c 'create database travis_ci_test;' -U postgres
  - psql -d travis_ci_test -c 'create table usuarios (ID_Usu serial primary key not null, name text,pw text, progres text, marca text, tipo text, cigar integer);' -U postgres

  - psql -d 'travis_ci_test' -c "INSERT INTO usuarios(name, pw, progres, marca, tipo, cigar) VALUES ('Usuario 1',md5('abc123'),'1995-11-06T23:20:50', 'MarcaA', 'Industrial', 22);" -b -U postgres
  - psql -d 'travis_ci_test' -c "select * from usuarios;" -U postgres
  
# command to install dependencies
install:
  - pip3 install -r requirements.txt
script: pytest -v test.py
